name: Project CI Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  # 允許手動觸發測試
  workflow_dispatch:

jobs:
  code_check:
    name: Code Quality and Security Scan
    runs-on: ubuntu-latest

    # ⚠️ 請將 YOUR_GITHUB_USERNAME 替換為您的實際使用者名稱
    uses: YOUR_GITHUB_USERNAME/ci-workflows/.github/workflows/code-scan.yml@main
    with:
      target_path: '.'
      run_pmd: true
      run_spotless: true
      java_version: '17' # 使用 Java 17